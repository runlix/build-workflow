# Test Dockerfile for base image - ARM64 Debug variant
# This wraps a distroless debug image (includes busybox shell)

ARG UPSTREAM_IMAGE
ARG UPSTREAM_TAG
ARG UPSTREAM_DIGEST

FROM ${UPSTREAM_IMAGE}:${UPSTREAM_TAG}@${UPSTREAM_DIGEST}

# Add a simple test marker file
# Debug images include busybox, so we can use shell
RUN echo '{ \
  "arch": "arm64", \
  "base_image": "'${UPSTREAM_IMAGE}'", \
  "base_tag": "'${UPSTREAM_TAG}'", \
  "base_digest": "'${UPSTREAM_DIGEST}'", \
  "variant": "debug" \
}' > /etc/build-info

# Debug variant includes shell for troubleshooting
